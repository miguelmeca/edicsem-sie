<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:p="http://primefaces.org/ui" template="/layout/template.xhtml">
	<ui:define name="body">
		<h1 class="title ui-widget-header ui-corner-all " >Mantenimiento Paquete Biblico</h1>
<h:form id="frmPaqueBibliList">
<p:messages showDetail="true" />
			
			
               
      <p:fieldset legend="Lista de Paquetes Biblicos">          
               	
			<p:dataTable id="pack" value="#{mantenimientoPaqueteBiblicoSearchAction.detPaqueteList}" var="pb" paginator="true" rows="5"
       paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
	   rowsPerPageTemplate="5,10,15" widgetVar="table"
	   emptyMessage="No se encontro registros">	
	  

			
	   
	   
				<p:column headerText="Codigo" >
					<h:outputText value="#{pb.codpaquete}" />
				</p:column>
				
				<p:column headerText="Descripcion"  >
					<h:outputText value="#{pb.descripcionpaquete}" />
				</p:column>
				
				
				<p:column headerText="Mostrar detalles">
				<center>
					<p:commandButton  
						action="#{mantenimientoDetallePaqueteBiblicoSearchAction.listar}"	
						update=":formdetalleform, :panelMostrarDetalle" 
						icon="ui-icon-search"
						 ajax="false"
						 title="Muestra los productos que tiene este paquete" >
						<f:setPropertyActionListener value="#{pb.idpaquete}"
							target="#{mantenimientoDetallePaqueteBiblicoSearchAction.idpaquete}" />
					</p:commandButton>
					</center>
				</p:column>
				
													
				
				
<p:column headerText="Editar">
<p:commandButton value="Editar "  oncomplete="PaqueteBiblico.show()"
								  action="#{mantenimientoPaqueteBiblicoFormAction.update}" 
								  update=":formPaqueteBiblico:display"
								  icon="ui-icon ui-icon-pencil" >
					<f:setPropertyActionListener value="#{pb}"
												 target="#{mantenimientoPaqueteBiblicoFormAction.objPaqueteSie}" />
					</p:commandButton>
				</p:column>
				
<!--**********INICIO 	DESACTIVAR**********-->

<p:column headerText="Deshabilitar Paquete Biblico">

<p:commandButton id="showConfirmDeshabilitar1"
				 value="Deshabilitar"
				 icon="ui-icon ui-icon-close"	 			
	 			 onclick="confirmationPaquete.show()">
	 			  
<f:setPropertyActionListener
		 value="#{pb.idpaquete}"
		 target="#{mantenimientoPaqueteBiblicoFormAction.idc}" 
/>							

</p:commandButton>
				
		</p:column>

		</p:dataTable>
		
		<p:commandButton value="Nuevo Paquete Biblico"
			   update=":formPaqueteBiblico:display"
               action="#{mantenimientoPaqueteBiblicoFormAction.agregar}"
               oncomplete="PaqueteBiblico.show()"  
               title="Crear Nuevo Paquete Biblico"
               icon="ui-icon-check"/>	
		
	</p:fieldset> 	
		
		<p:spacer height="20"></p:spacer>
		
<p:outputPanel id="panelMostrarDetalle" rendered="#{mantenimientoPaqueteBiblicoSearchAction.objPaqueteSie.idpaquete!=0}" >
	
<p:fieldset legend="Detalles del Paquetes Biblicos"> 



		<p:dataTable value="#{mantenimientoDetallePaqueteBiblicoSearchAction.detPaqueteBiblicoList}" 
					var="c"		id="formdetalleform">
				
				
				<p:column headerText="Codigo de Paquete" >
					<h:outputText value="#{c.tbPaquete.codpaquete}" />
				</p:column>
				
				<p:column headerText="Nombre de Producto" >
					<h:outputText value="#{c.tbProducto.descripcionproducto}" />
				</p:column>
				
				<p:column headerText="Cantidad" >
					<h:outputText value="#{c.cantidad}" />
				</p:column>
				
				
				
				
				
				
								
<p:column headerText="Editar">
<p:commandButton value="Editar"	 oncomplete="DetPaqueteBiblico.show()"
				 action="#{mantenimientoDetallePaqueteBiblicoSearchAction.update}" 
				 update=":formDetPaqueteBiblico:display"
				 icon="ui-icon ui-icon-pencil" >
<f:setPropertyActionListener value="#{c}"
							 target="#{mantenimientoDetallePaqueteBiblicoSearchAction.objDetPaqueteSie}" />
</p:commandButton>
</p:column>
				
				
		<!--**********INICIO DESACTIVAR PRODUCTO**********-->

<p:column headerText="Eliminar Producto">

<p:commandButton id="showConfirmDeshabilitarProDetPACK"
				 value="Eliminar"
				 icon="ui-icon ui-icon-close"	 			
	 			 onclick="confirmationPaqueteProDetPACK.show()">
	 			  
<f:setPropertyActionListener
		 value="#{c.idDetPaquete}"
		 target="#{mantenimientoDetallePaqueteBiblicoSearchAction.idc}" 
/>							

</p:commandButton>
				
		</p:column>
			</p:dataTable>
	<p:commandButton value="Agregar un nuevo producto al paquete"
update=":formDetPaqueteBiblico:display"
action="#{mantenimientoDetallePaqueteBiblicoSearchAction.agregar}"
oncomplete="DetPaqueteBiblico.show()" 
icon="ui-icon ui-icon-check" 
title="Ingresar Nuevo Paquete Biblico"/>	
	</p:fieldset> 	
</p:outputPanel>
			
		</h:form>
	 </ui:define>
</ui:composition>