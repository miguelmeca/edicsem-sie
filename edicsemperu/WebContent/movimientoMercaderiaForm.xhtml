<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:p="http://primefaces.org/ui" template="/layout/template.xhtml">
	<ui:define name="body">
		<h1 class="title ui-widget-header ui-corner-all">Movimiento
			Mercadería</h1>
		<h:form id="formMovMerc">
			<p:growl id="message" showDetail="true" />
			<p:panel header="#{message['panel.ingreso.mercaderia']}">
				<h:panelGrid columns="6" id="panel"   >
					<h:outputText value="#{message['movimiento.tipo']}" />

					<p:selectOneMenu id="idtipokardex" required="true" requiredMessage="#{message['movimiento.tipokardex.validation']}" 
						value="#{movimientoMercaderia.idtipokardexproducto}"  style="width:165px" >
						<f:selectItem itemLabel="Seleccione tipo kardex" itemValue="#{null}" />
						<f:selectItems id="tipokardex" value="#{comboAction.tipoKardexItems}"  />
						<p:ajax update="panel" listener="#{movimientoMercaderia.cambiar}" />
					</p:selectOneMenu>
					
						<p:message for="idtipokardex" />
				 
						<h:outputText id="ide"
							value="#{message['mantenimiento.producto.cantidadEnt']}"   rendered="#{!movimientoMercaderia.editMode}" />
							
							<p:spinner id="spinnerE" size="2" min="1"  required="true" requiredMessage="#{message['movimiento.cantEntrada.validation']}" 
							value="#{movimientoMercaderia.objKardexSie.cantentrada}" rendered="#{!movimientoMercaderia.editMode}"/>
						 
						<h:outputText id="ids"
							value="#{message['mantenimiento.producto.cantidadSal']}" rendered="#{movimientoMercaderia.editMode}"/>
							<p:spinner id="spinnerS" size="2" min="1"  required="true" requiredMessage="#{message['movimiento.cantSalida.validation']}" 
							value="#{movimientoMercaderia.objKardexSie.cantsalida}" rendered="#{movimientoMercaderia.editMode}"/>
							 		 
					 <h:panelGroup>
					 <p:message for="spinnerE" />
					 <p:message for="spinnerS" />
					 </h:panelGroup>
					<h:outputText value="#{message['mantenimiento.producto.tipo']}" />
					<p:selectOneMenu id="tipoProd" value="#{comboAction.tipoProducto}" requiredMessage="#{message['movimiento.tipoProducto.validation']}"
						required="true"  style="width:165px" >
						<f:selectItem itemLabel="Seleccionar tipo" itemValue="#{null}" />
						<f:selectItems value="#{comboAction.tipoitems}" />
						<p:ajax update="produc" listener="#{comboAction.cambiar}" />
					</p:selectOneMenu>
					<p:message for="tipoProd" />
					<h:outputText value="#{message['mantenimiento.producto']}" />
					<p:selectOneMenu id="produc" requiredMessage="#{message['movimiento.producto.validation']} "
						value="#{movimientoMercaderia.idproducto}" required="true"  style="width:165px" >
						<f:selectItem itemLabel="Seleccione Producto" itemValue="#{null}"  />
						<f:selectItems value="#{comboAction.productositems}" />
					</p:selectOneMenu>
					<p:message for="produc" />

					<h:outputText value="#{message['mantenimiento.kardex.almacen']}" />
					<p:selectOneMenu id="idAlmacen" size="1" required="true"  style="width:165px" 
						value="#{movimientoMercaderia.idAlmacen}" requiredMessage="#{message['movimiento.almacen.validation']}" >
						<f:selectItem itemLabel="Seleccione almacen" itemValue="#{null}" />
						<f:selectItems value="#{comboAction.almacenItems}" />
					</p:selectOneMenu>
					<p:message for="idAlmacen" />
					<h:outputText value="almacen 2" />
					<p:selectOneMenu id="idAlmacen2" size="1"  style="width:165px" 
						value="#{movimientoMercaderia.idAlmacen2}"   >
						<f:selectItem itemLabel="Seleccione almacen" itemValue="0" />
						<f:selectItems value="#{comboAction.almacenItems}" />
					</p:selectOneMenu>
					<p:spacer />
					
					<h:outputText value="Detalle" id="detProd" />
					<p:inputTextarea
						value="#{movimientoMercaderia.objKardexSie.detallekardex}" />
				
				<!-- tipo producto, producto,  empresa, valorTotal, cantidad producto   -->
				
					<h:outputText value="#{message['movimiento.empresa.descripcion']}" rendered="#{!movimientoMercaderia.editMode}"/>
					<p:selectOneMenu size="1" rendered="#{!movimientoMercaderia.editMode}"   style="width:165px" 
						value="#{movimientoMercaderia.idempresa}">
						<f:selectItem itemLabel="Seleccione Empresa" itemValue="0" />
						<f:selectItems value="#{comboAction.empresaitems}" />
					</p:selectOneMenu>
					<p:spacer/>
					
					<h:outputText value="#{message['movimiento.proveedor.nombreempresa']}"   rendered="#{!movimientoMercaderia.editMode}" />
					<p:selectOneMenu size="1" rendered="#{!movimientoMercaderia.editMode}"  style="width:165px" 
						value="#{movimientoMercaderia.idproveedor}">
						<f:selectItem itemLabel="Seleccione Proveedor" itemValue="#{null}" />
						<f:selectItems value="#{comboAction.proveedoritems}" />
					</p:selectOneMenu>
					<p:spacer />
					<h:outputText value="#{message['movimiento.valortotal']}"   rendered="#{!movimientoMercaderia.editMode}" />
							
					<p:spinner id="valortotal" size="2" min="1"  required="true" requiredMessage="#{message['movimiento.valortotal.validation']}" 
							value="#{movimientoMercaderia.objKardexSie.valortotal}"  rendered="#{!movimientoMercaderia.editMode}"/>
				<p:message for="valortotal" />
				
					<h:outputText value="#{message['movimiento.comprobante.numero']}" />
					<p:inputMask id="num_comp" mask="9999999999" value="#{movimientoMercaderia.objcomprobante.codcomprobante}" required="true" 
					requiredMessage="#{message['movimiento.comprobante.numero.validation']}"  rendered="#{!movimientoMercaderia.editMode}"/>
				<p:message for="num_comp" />
				</h:panelGrid>
				
				<p:commandButton id="id"
						actionListener="#{movimientoMercaderia.insertar}"
						value="Grabar Mercadería" ajax="false"
						update="formMovMerc:listaMovim, message">
					</p:commandButton>
				<p:dataTable id="listaMovim" value="#{movimientoMercaderia.data}" 
					var="d">
					<p:column>
						<f:facet name="header">
							<h:outputText value="Id Kardex" />
						</f:facet>
						<h:outputText value="#{d.idkardex}" />
					</p:column>
					<p:column>
						<f:facet name="header">
							<h:outputText value="Almacen" />
						</f:facet>
						<h:outputText value="#{d.tbPuntoVenta.descripcion}" />
					</p:column>
					<p:column>
						<f:facet name="header">
							<h:outputText value="Tipo de Kardex" />
						</f:facet>
						<h:outputText value="#{d.tbTipoKardexProducto.descripcion}" />
					</p:column>
					<p:column>
						<f:facet name="header">
							<h:outputText value="Producto" />
						</f:facet>
						<h:outputText value="#{d.tbProducto.descripcionproducto}" />
					</p:column>
					<p:column>
						<f:facet name="header">
							<h:outputText value="Cant. Entrada" />
						</f:facet>
						<h:outputText value="#{d.cantentrada}" />
					</p:column>
					<p:column>
						<f:facet name="header">
							<h:outputText value="valor Entrada" />
						</f:facet>
						<h:outputText value="#{d.valorunitarioentrada}" />
					</p:column>
					<p:column>
						<f:facet name="header">
							<h:outputText value="Cant. Salida" />
						</f:facet>
						<h:outputText value="#{d.cantsalida}" />
					</p:column>
					<p:column>
						<f:facet name="header">
							<h:outputText value="valor Salida" />
						</f:facet>
						<h:outputText value="#{d.valorunitariosalida}" />
					</p:column>
					<p:column>
						<f:facet name="header">
							<h:outputText value="Cantidad Existente" />
						</f:facet>
						<h:outputText value="#{d.cantexistencia}" />
					</p:column>
					<p:column>
						<f:facet name="header">
							<h:outputText value="Valor total" />
						</f:facet>
						<h:outputText value="#{d.valortotal}" />
					</p:column>
					<p:column>
						<f:facet name="header">
							<h:outputText value="Valor Existente" />
						</f:facet>
						<h:outputText value="#{d.valorunitarioexistencia}" />
					</p:column>
				</p:dataTable>
				<p:commandButton value="Listar" action="#{movimientoMercaderia.listar}" ajax="false" />
			</p:panel>
			<h:panelGrid columns="4" id="panel"   >
					
					<h:outputText value="#{message['movimiento.stockTotal.almacenes']}" />
					<p:inputText  value ="#{movimientoMercaderia.stockTotalAlmacenado}" />
			</h:panelGrid>
		</h:form>
	</ui:define>
</ui:composition>