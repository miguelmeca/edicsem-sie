<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:p="http://primefaces.org/ui" template="/layout/template.xhtml">
	<ui:define name="body">
		<h1 class="title ui-widget-header ui-corner-all">Mantenimiento
			Contrato</h1>
		<h:form id="formManteContrato3">
			<p:growl id="message" showDetail="true" />
			<p:panel header="#{message['panel.contrato.cliente']}">
				<h:panelGrid columns="6">

					<h:outputText id="nombreCliente"
						value="#{message['contrato.nombre']}" />
					<p:inputText value="#{contratoForm.objClienteSie.nombrecliente}"
						required="true"
						requiredMessage="#{message['contrato.nombre.validation']}" />
					<p:message for="nombreCliente" />

					<h:outputText id="apMatCliente"
						value="#{message['contrato.apematerno']}" />
					<p:inputText value="#{contratoForm.objClienteSie.apematcliente}"
						required="true"
						requiredMessage="#{message['contrato.apematerno.validation']}" />
					<p:message for="apMatCliente" />

					<h:outputText id="apPatCliente"
						value="#{message['contrato.apepaterno']}" />
					<p:inputText value="#{contratoForm.objClienteSie.apepatcliente}"
						required="true"
						requiredMessage="#{message['contrato.apepaterno.validation']}" />
					<p:message for="apPatCliente" />

					<h:outputText value="#{message['contrato.tipo.documento']}" />
					<p:selectOneMenu id="tipoDoc" size="1" style="width:165px"
						required="true"
						requiredMessage="#{message['contrato.tipo.documento.validation']}"
						value="#{contratoForm.idempresa}">
						<f:selectItem itemLabel="Seleccione tipo documento"
							itemValue="#{null}" />
						<f:selectItems value="#{comboAction.tipoDocumentoitems}" />
					</p:selectOneMenu>
					<p:message for="tipoDoc" />

					<h:outputText value="#{message['contrato.numero.documento']}" />
					<p:inputText id="numDoc" required="true"
						requiredMessage="#{message['contrato.numero.documento.validation']}" />
					<p:message for="numDoc" />

				</h:panelGrid>
				
				<h:panelGrid columns="6" id="panel2">
					<h:outputText value="Lima (defecto)" />
					<p:selectBooleanCheckbox id="sel"
						value="#{contratoForm.defectoUbigeo}">
						<p:ajax update="panel2,ubigeoDefecto"
							listener="#{contratoForm.cambioUbigeoDefecto}"
							oncomplete="if(#{contratoForm.defectoUbigeo}) UbigeoDialog.show()"></p:ajax>
					</p:selectBooleanCheckbox>

					<h:outputText value="#{message['contrato.ubigeo.distrito']}"
						rendered="#{contratoForm.defectoUbigeo}" />
					<p:selectOneMenu value="#{contratoForm.idUbigeo}"
						rendered="#{contratoForm.defectoUbigeo}" required="true"
						style="width:200px"
						requiredMessage="#{message['contrato.ubigeo.distrito.validation']}">
						<f:selectItem itemLabel="Seleccione Distrito" itemValue="#{null}" />
						<f:selectItems value="#{comboAction.ubigeoDistriItems}" />
						<p:ajax update="panel2" listener="#{contratoForm.cambioUbica}"></p:ajax>
					</p:selectOneMenu>


					<h:outputText value="Ubigeo " />
					<h:outputText id="ubigeoDefecto"
						value="#{contratoForm.ubigeoDefecto}" />

				</h:panelGrid>
				<h:panelGrid columns="6">
					<h:outputText value="#{message['contrato.ubigeo.domicilio']}" />
					<p:inputText id="domicilio"
						value="#{contratoForm.objDomicilioSie.domicilio}" required="true"
						requiredMessage="#{message['contrato.ubigeo.domicilio.validation']}" />
					<p:message for="domicilio" />

					<h:outputText value="#{message['contrato.ubigeo.referencia']}" />
					<p:inputText value="#{contratoForm.objDomicilioSie.referencia}" />

					<h:outputText value="#{message['contrato.empresa.labora.nombre']}" />
					<p:inputText value="#{contratoForm.objClienteSie.empresatrabajo}" />

					<h:outputText
						value="#{message['contrato.empresa.labora.direccion']}" />
					<p:inputText value="#{contratoForm.objClienteSie.directrabajo}" />

					<h:outputText
						value="#{message['contrato.empresa.labora.telefono']}" />
					<p:inputText value="#{contratoForm.objClienteSie.telftrabajo}" />

					<h:outputText value="#{message['contrato.titular.telefono']}"
						required="true" />
					<p:inputText value="#{contratoForm.objClienteSie.titulartelefono}" />

					<h:outputText value="#{message['contrato.cliente.email']}" />
					<p:inputText value="#{contratoForm.objClienteSie.correo}" />


					<p:spacer />
					<h:outputText value="#{message['contrato.telefono.casa']}" />
					<p:inputMask mask="999-9999"
						requiredMessage="#{message['contrato.telefono.casa.validation']}" />
					<h:outputText value="#{message['contrato.celular']}" />
					<p:inputMask mask="999-999999"
						requiredMessage="#{message['contrato.celular.validation']}" />

					<h:outputText value="#{message['contrato.fechanac']}" />
					 
					<h:outputText value="#{message['contrato.cliente.email']}" />
					<p:inputText size="15" />
				</h:panelGrid>
			</p:panel>
			</h:form>
				
				<h:form id="formManteContrato">
				 
				<h:panelGrid columns="6" id="panel4">
					<p:selectOneMenu   size="1"  value="#{contratoForm.tipoTelef}"
						style="width:165px"  >
						<f:selectItem itemLabel="Fijo" itemValue="1" />
						<f:selectItem itemLabel="Celular" itemValue="2" />
						<p:ajax update="panel4" listener="#{contratoForm.limpiarDatosTelefono}" ></p:ajax>
					</p:selectOneMenu>
					
					<p:selectOneMenu   size="1" required="true" value="#{contratoForm.operadorTelefonico}"
						style="width:165px" requiredMessage="#{message['contrato.operadorTelefonico.validation']}" >
						<f:selectItem itemLabel="Seleccione Operador" itemValue="#{null}" />
						<f:selectItem itemLabel="Claro" itemValue="1" />
						<f:selectItem itemLabel="Telefónica" itemValue="2" />
						<f:selectItem itemLabel="Nextel" itemValue="3" />
					</p:selectOneMenu>

					<h:outputText value="#{message['contrato.telefono.casa']}" rendered="#{contratoForm.tipoTelef==1}" />
					<p:inputMask mask="999-9999" value="#{contratoForm.nuevoTelef.telefono}"
						requiredMessage="#{message['contrato.telefono.casa.validation']}"  rendered="#{contratoForm.tipoTelef==1}"/>
						
					<h:outputText value="#{message['contrato.celular']}"  rendered="#{contratoForm.tipoTelef==2}"/>
					<p:inputMask mask="999-999999" value="#{contratoForm.nuevoTelef.telefono}"
						requiredMessage="#{message['contrato.celular.validation']}"  rendered="#{contratoForm.tipoTelef==2}"/>
						
					<p:commandButton value="Agregar Telefono Referencias" icon="ui-icon ui-icon-check" 
					action="#{contratoForm.telefonoAgregar}" ajax="false" update=":panel4:t" >
				 
				</p:commandButton>
						
					<p:dataList value="#{contratoForm.telefonoList}" var="t" id="t"
						paginator="true" rows="5" effectSpeed="fast" type="none">

						<f:facet name="header">
                Telefonos de Referencia  
            </f:facet>
						
						<p:commandButton icon="ui-icon-close"
							oncomplete="confirmationAlmacen.show()" title="eliminar">
							<f:setPropertyActionListener value="#{t.telefono}"
								target="#{contratoForm.selectTelef}" />
						</p:commandButton>

						<h:outputText value="#{t.tipotelefono}, #{t.operadorTelefonico}, #{t.telefono}"
							style="margin-left:10px" />
						<br />
					</p:dataList>

				</h:panelGrid>
			</h:form>
			<h:form id="form3" >
			<p:panel header="#{message['panel.contrato.producto']}">
			<h:panelGrid columns="4" id="panelVenta" >
				<h:outputText value="#{message['contrato.empresa']}" />
				<p:selectOneMenu size="1" id="idempresa" required="true"
					style="width:165px"
					requiredMessage="#{message['contrato.empresa.validation']}"
					value="#{contratoForm.idempresa}">
					<f:selectItem itemLabel="Seleccione Empresa" itemValue="#{null}" />
					<f:selectItems value="#{comboAction.empresaitems}" />
				</p:selectOneMenu>
				
				<h:outputText value="#{message['contrato.tipo.venta']}" />
				<p:selectOneMenu   size="1"  value="#{contratoForm.tipoVenta}"
						style="width:165px"  >
						<f:selectItem itemLabel="Venta masiva" itemValue="1" />
						<f:selectItem itemLabel="Punto de Venta" itemValue="2" />
						<p:ajax update="panelVenta" />
				</p:selectOneMenu>
				<h:outputText value="#{message['contrato.puntoVenta']}" rendered="#{contratoForm.tipoVenta==1}" />
				<p:selectOneMenu  size="1" required="true"
					style="width:165px" rendered="#{contratoForm.tipoVenta==1}" 
					requiredMessage="#{message['contrato.puntoVenta.validation']}">
					<f:selectItem itemLabel="Seleccione almacen" itemValue="#{null}" />
					<f:selectItems value="#{comboAction.almacenItems}" />
				</p:selectOneMenu>
				
				<h:outputText rendered="#{contratoForm.tipoVenta==2}" 
						value="#{message['contrato.apematerno']}" />
					<p:inputText value="#{contratoForm.objClienteSie.apematcliente}"
						required="true" rendered="#{contratoForm.tipoVenta==2}" 
						requiredMessage="#{message['contrato.apematerno.validation']}" />
				</h:panelGrid>
			</p:panel>
			<p:panel header="#{message['panel.contrato.plan.pagos']}"  id="panelPlanPagos" >
				<h:panelGrid columns="4" id="panelx" >
				<h:outputText value="#{message['contrato.tipoPago']}" />
				<p:selectOneMenu   size="1"  value="#{contratoForm.tipopago}"
						style="width:165px"  >
						<f:selectItem itemLabel="Crédito" itemValue="1" />
						<f:selectItem itemLabel="Contado" itemValue="2" />
						<p:ajax update="panelPlanPagos" />
				</p:selectOneMenu>
				
				<h:outputText value="#{message['contrato.pagosubinicial']}" />
					<p:inputText value="#{contratoForm.objContratoSie.pagosubinicial}"
						required="true"  />
				
				<h:outputText value="#{message['contrato.Fecha.pago.inicial']}" />
				<p:calendar value="#{contratoForm.objContratoSie.fechacuotainicial}" pattern="dd/MM/yyyy" effect="explode"
						required="true"  />
						
				<h:outputText value="#{message['contrato.producto.precio']}" />
				<p:inputText value="#{contratoForm.precioProducto}"
						required="true"  />
						
				<h:outputText value="#{message['contrato.cuotaInicial']}" />
				<p:inputText value="#{contratoForm.objContratoSie.cuotainicial}" readonly="true" />
				
				<h:outputText value="#{message['contrato.cantCuotas']}" />
				<p:spinner id="spinnerE" size="2" min="1" required="true"
						requiredMessage="#{message['movimiento.cantEntrada.validation']}"
						value="#{contratoForm.objContratoSie.numcuotas}" />
				<p:commandButton value="Registrar"
				actionListener="#{contratoForm.insertarCobranza}" update="message"
				icon="ui-icon ui-icon-check" ajax="false">
				</p:commandButton>
						
		
    </h:panelGrid>
			</p:panel>
			<p:dataTable id="dd" var="c" value="#{contratoForm.cobranzaList}" editable="true">

        <f:facet name="header">
            Editar Cobranzas
        </f:facet>

        <p:ajax event="rowEdit" listener="#{contratoForm.onEdit}"  update="@this" />
        <p:ajax event="rowEditCancel" listener="#{contratoForm.onCancel}" update="dd" />

        <p:column headerText="Número de Letra" style="width:125px">
            <p:cellEditor>
                <f:facet name="output">
                    <h:outputText value="#{c.numletra}" />
                </f:facet>
                <f:facet name="input">
                    <h:outputText value="#{c.numletra}" style="width:100%"/>
                </f:facet>
            </p:cellEditor>
        </p:column>

        <p:column headerText="Importe" style="width:125px">
            <p:cellEditor>
                <f:facet name="output">
                    <h:outputText value="#{c.impinicial}" />
                </f:facet>
                <f:facet name="input">
                    <p:inputText value="#{c.impinicial}" style="width:100%"  />
                </f:facet>
            </p:cellEditor>
        </p:column>

        <p:column headerText="Fecha Vencimiento" style="width:125px">
            <p:cellEditor>
                <f:facet name="output">
                    <h:outputText value="#{c.fechaVencimientoString}"  />
                </f:facet>
                <f:facet name="input">
                  <p:calendar   value="#{c.fecvencimiento}" />
                </f:facet>
            </p:cellEditor>
        </p:column>

        <p:column headerText="Options" style="width:50px">
            <p:rowEditor />
        </p:column>

    </p:dataTable>
			<p:commandButton value="Registrar"
				actionListener="#{contratoForm.insertar}" update="message"
				icon="ui-icon ui-icon-check" ajax="false">
			</p:commandButton>
	</h:form>
	</ui:define>
	</ui:composition>