<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	template="/layout/template.xhtml">
	<ui:define name="body">
		<h:form id="form">
		<p:messages id="message" showDetail="true"/>
		<p:panel header="Registrar Empleado"  id="panel">
	    <p:wizard id="wiz" widgetVar="wiz" flowListener="#{mantenimientoEmpleadoFormAction.onFlowProcess}">
	    <p:tab title="#{message['empleado.tabpersonal']}">
	    <p:panel header="Datos Personales"> 
        <h:panelGrid columns="2" cellpadding="5">						
			<p:outputLabel value="#{message['empleado.nombre']}" for="nombre" />
			<p:inputText id="nombre" value="#{mantenimientoEmpleadoFormAction.objEmpleado.nombreemp}" required="true" label="Nombre" 
			requiredMessage="#{message['empleado.nombre.validation']}"/>
			<p:outputLabel value="#{message['empleado.apepaterno']}" for="apepaterno" />
			<p:inputText id="apepaterno" value="#{mantenimientoEmpleadoFormAction.objEmpleado.apepatemp}" required="true" label="Apellido paterno"
			requiredMessage="#{message['empleado.apepaterno.validation']}"/>
			<p:outputLabel value="#{message['empleado.apematerno']}" for="apematerno" />
			<p:inputText id="apematerno" value="#{mantenimientoEmpleadoFormAction.objEmpleado.apematemp}" required="true" label="Apellido materno"
			requiredMessage="#{message['empleado.apematerno.validation']}"/>						
			<p:outputLabel value="#{message['empleado.usuario']}" for="usuario" />
			<p:inputText id="usuario" value="#{mantenimientoEmpleadoFormAction.objEmpleado.usuario}" required="true" label="Usuario" 
			requiredMessage="#{message['empleado.usuario.validation']}"/>
		    <p:outputLabel value="#{message['empleado.contrasena']}" for="contrasenya" />
			<p:password id="contrasenya" value="#{mantenimientoEmpleadoFormAction.objEmpleado.contrasena}" required="true" label="Contrasenya"
			requiredMessage="#{message['empleado.contrasenya.validation']}"/>
			<p:outputLabel value="#{message['empleado.confcontra']}" for="confcontra" />
			<p:password id="confcontra" value="#{mantenimientoEmpleadoFormAction.confcontra}" required="true" label="Confcontra"
			requiredMessage="#{message['empleado.confcontra.validation']}"/>
			<p:outputLabel for="tipo" value="Tipo de Doc. :" styleClass="textoAzulFuerteGrande" id="tipoL"/>
            <p:selectOneMenu id="tipo" value="#{mantenimientoEmpleadoFormAction.tipoDocumento}" styleClass="required" title="El tipo es obligatorio!" >
            <f:selectItem itemLabel="Seleccione tipo Documento" itemValue="#{null}" />
            <f:selectItems  value="#{comboAction.tipoDocumentoitems}" />
            <p:ajax update="nrodoc"/>
            </p:selectOneMenu>
            <h:outputText value="#{message['empleado.nrodoc']}" />
            <h:panelGroup id="nrodoc" >
			<p:inputMask value="#{mantenimientoEmpleadoFormAction.objEmpleado.numdocumento}" mask="99999999"
					rendered="#{mantenimientoEmpleadoFormAction.tipoDocumento==1}"
					required="true" label="nrodoc"
					requiredMessage="#{message['empleado.nrodoc.validation']}" />
					
			<p:inputMask value="#{mantenimientoEmpleadoFormAction.objEmpleado.numdocumento}" mask="99999999999"
					rendered="#{mantenimientoEmpleadoFormAction.tipoDocumento==2}"/>
            </h:panelGroup>
                          
            <p:outputLabel value="#{message['empleado.fechanac']}" for="fechanac" />
			<p:calendar pagedate="-8380" maxdate="today" value="#{mantenimientoEmpleadoFormAction.objEmpleado.fechanacimiento}" id="fechanac" showButtonPanel="true" required="true"  pattern="dd/MM/yyyy"
			label="Fecha de nacimiento" requiredMessage="#{message['empleado.fechanac.validation']}"/>                  
            
            <h:outputText value="#{message['contrato.cliente.correo']}" />
					<p:inputText value="#{mantenimientoEmpleadoFormAction.objEmpleado.correo}"   title="para el @ presione: la tecla Alt + 64 y en laptop Alt Gr + Q" required="true" requiredMessage="#{message['contrato.cliente.email.validation']}" id="email" validatorMessage="Email incorrecto" maxlength="45" >
					 <f:validateRegex pattern="#{message['pattern.email.norequired']}" />
					</p:inputText>
            <p:watermark for="email" value="ejm@edicsem.com" /> 
            
			</h:panelGrid>
			</p:panel>
        </p:tab>
    
<p:tab title="#{message['empleado.tabnumeros']}">
			  <p:panel header="Números Telefónicos" >
				<h:panelGrid columns="6"  id="panelTlf" >
				
				<h:outputText value="#{message['contrato.tipo.telefono']}" />
				<p:selectOneMenu  value="#{mantenimientoEmpleadoFormAction.tipoTelef}"
						style="width:165px"  >
						<f:selectItem itemLabel="Fijo" itemValue="1" />
						<f:selectItem itemLabel="Celular" itemValue="2" />
						<p:ajax update="panelTlf" listener="#{mantenimientoEmpleadoFormAction.limpiarDatosTelefono}" ></p:ajax>
				</p:selectOneMenu>
				<p:spacer />
					
					<h:outputText value="#{message['contrato.operadorTelefonico']}" />
					<p:selectOneMenu id="operadorTelefonico" required="true" value="#{mantenimientoEmpleadoFormAction.operadorTelefonico}" rendered="#{mantenimientoEmpleadoFormAction.tipoTelef==1}"
						style="width:165px" requiredMessage="#{message['contrato.operadorTelefonico.validation']}" >
						<f:selectItem itemLabel="Seleccione Operador" itemValue="#{null}" />
						<f:selectItem itemLabel="Claro" itemValue="1" />
						<f:selectItem itemLabel="Telefónica" itemValue="2" />
					</p:selectOneMenu>
					<p:message for="operadorTelefonico" rendered="#{mantenimientoEmpleadoFormAction.tipoTelef==1}" />
					
					<p:selectOneMenu id="operadorCelular" required="true" value="#{mantenimientoEmpleadoFormAction.operadorTelefonico}" rendered="#{mantenimientoEmpleadoFormAction.tipoTelef==2}"
						style="width:165px" requiredMessage="#{message['contrato.operadorTelefonico.validation']}" >
						<f:selectItem itemLabel="Seleccione Operador" itemValue="#{null}" />
						<f:selectItem itemLabel="Claro" itemValue="1" />
						<f:selectItem itemLabel="Movistar" itemValue="2" />
						<f:selectItem itemLabel="Nextel" itemValue="3" />
					</p:selectOneMenu>
					<p:message for="operadorCelular" rendered="#{mantenimientoEmpleadoFormAction.tipoTelef==2}" />
					
					<h:outputText value="#{message['contrato.telefono']}" rendered="#{mantenimientoEmpleadoFormAction.tipoTelef==1}" />
					<p:inputMask id="numTelef" mask="999-9999" value="#{mantenimientoEmpleadoFormAction.nuevoTelef.telefono}"
						requiredMessage="#{message['contrato.telefono.casa.validation']}"  rendered="#{mantenimientoEmpleadoFormAction.tipoTelef==1}"/>
					<p:message for="numTelef" rendered="#{mantenimientoEmpleadoFormAction.tipoTelef==1}"/>
					
						<h:outputText value="#{message['contrato.celular']}"  rendered="#{mantenimientoEmpleadoFormAction.tipoTelef==2}"/>
						<p:inputMask mask="999-999999" value="#{mantenimientoEmpleadoFormAction.nuevoTelef.telefono}" id="numCelular"
							requiredMessage="#{message['contrato.celular.validation']}"  rendered="#{mantenimientoEmpleadoFormAction.tipoTelef==2}"/>
						<p:message for="numCelular"  rendered="#{mantenimientoEmpleadoFormAction.tipoTelef==2}"/>
						
						<h:outputText value="#{message['contrato.telefono.descripcion']}" />
						<p:inputText value="#{mantenimientoEmpleadoFormAction.nuevoTelef.descTelefono}" />
						<p:spacer />
						
						<p:commandButton value="Agregar Telefono Referencia"  icon="ui-icon ui-icon-check" 
						actionListener="#{mantenimientoEmpleadoFormAction.telefonoAgregar}" update="listarTelefonos, message" > 
						</p:commandButton>
						
				</h:panelGrid>
						<p:dataTable value="#{mantenimientoEmpleadoFormAction.telefonoPersonaList}" id="listarTelefonos" var="o" style="width:600px" 
							 rowStyleClass="#{o.operadorTelefonico eq 'Claro' ? 'colorRojo': (o.operadorTelefonico eq 'Movistar' ? 'color2': 'color3') }"   >
	
							<f:facet name="header">
								<h:outputLabel value="Telefonos de Referencia" />
							</f:facet>
							
							<p:column headerText="Observación" style="width:270px">
		                    	<h:outputText value="#{o.tipoTelef}, #{o.operadorTelefonico}, #{o.telefono}" />
		                    </p:column>
		                    
		                    <p:column headerText="Detalle" style="width:125px">
		                    	<h:outputText value="#{o.descTelefono}" />
		                    </p:column>
		                    
	                        <p:column headerText="Eliminar" style="width:125px">
		                    <p:commandButton id="showConfirmDeshabilitarTelEmp" 
				            value="Eliminar"  
				            icon="ui-icon ui-icon-close"
				            onclick="confirmationTelEmp.show()"> 
	 							
                            <f:setPropertyActionListener
		                    value="#{o.telefono}"
		                    target="#{mantenimientoEmpleadoFormAction.idt}"     />

                            </p:commandButton>
		                    </p:column>
	 
						</p:dataTable>
					
				</p:panel>
				</p:tab>    
    
        <p:tab title="#{message['empleado.tabdireccion']}">
        <p:panel header="Dirección">
        <h:messages errorClass="error"/>  
        <h:panelGrid columns="2" id="panel3">
         <p:outputLabel value="#{message['domicilio.direccion']}" for="domicilio" />
			<p:inputText id="domicilio" value="#{mantenimientoEmpleadoFormAction.objDomicilio.domicilio}" required="true" label="Domicilio"
			requiredMessage="#{message['domicilio.direccion.validation']}"/>  			    
				
				<h:outputText value="#{message['contrato.ubigeo.departamento']}" />
				<p:selectOneMenu size="1" value="#{mantenimientoEmpleadoFormAction.idDepartamento}" filter="true" filterMatchMode="startsWith"
					required="true" style="width:200px"
					requiredMessage="#{message['puntoVenta.ubigeo.departamento.validation']}" >
					<f:selectItem itemLabel="Seleccione Departamento"
						itemValue="#{null}" />
					<f:selectItems value="#{comboAction.ubigeoDeparItems}" />
					<p:ajax update="prov,dist" listener="#{mantenimientoEmpleadoFormAction.cambiar}" />
				</p:selectOneMenu>

				<h:outputText value="#{message['contrato.ubigeo.provincia']}" />
				<p:selectOneMenu id="prov" value="#{mantenimientoEmpleadoFormAction.idProvincia}" filter="true" filterMatchMode="startsWith"
					required="true" style="width:220px"
					requiredMessage="#{message['puntoVenta.ubigeo.provincia.validation']}" >
					<f:selectItem itemLabel="Seleccione Provincia" itemValue="#{null}" />
					<f:selectItems value="#{comboAction.ubigeoProvinItems}" />
					<p:ajax update="dist" listener="#{mantenimientoEmpleadoFormAction.cambiar2}" />
				</p:selectOneMenu>

				<h:outputText value="#{message['contrato.ubigeo.distrito']}" />
				<p:selectOneMenu id="dist" value="#{mantenimientoEmpleadoFormAction.idUbigeo}" filter="true" filterMatchMode="startsWith"
					required="true" style="width:220px"
					requiredMessage="#{message['puntoVenta.ubigeo.distrito.validation']}" >
					<f:selectItem itemLabel="Seleccione Distrito" itemValue="#{null}" />
					<f:selectItems value="#{comboAction.ubigeoDistriItems}" />
					<p:ajax update="ubigeoDefecto2" listener="#{mantenimientoEmpleadoFormAction.busquedaUbigeo}" ></p:ajax>
				</p:selectOneMenu>
				
				<h:outputText value="Ubigeo " />
				<h:outputText id="ubigeoDefecto2" value="#{mantenimientoEmpleadoFormAction.ubigeoDefecto}" />
			
			<p:outputLabel for="tipocasa" value="#{message['empleado.tipoCasa']}" styleClass="textoAzulFuerteGrande" id="tipocasaL"/>
            <p:selectOneMenu id="tipocasa" value="#{mantenimientoEmpleadoFormAction.tipo}" styleClass="required" title="El tipo de casa es obligatorio!" >
            <f:selectItem  itemValue="#{null}" itemLabel="Seleccione una opción"/>
            <f:selectItems value="#{comboAction.tipocasaItems}" />
            </p:selectOneMenu>
           </h:panelGrid>
            </p:panel>
        </p:tab>
         <p:tab title="#{message['empleado.tabcontrato']}" id="contemp"  >
         <p:panel id="panlcont" header="Datos Contrato">
         
           <h:panelGrid columns="2"  >
            <h:outputText value="#{message['empleado.empresa.descripcion']}" />
            <p:selectOneMenu id="empresa" value="#{mantenimientoEmpleadoFormAction.idEmpresa}">
            <f:selectItems value="#{comboAction.empresaitems}"/>
            </p:selectOneMenu>
            
            <h:outputText value="#{message['empleado.fecInicio']}" />
            <p:calendar value="#{mantenimientoEmpleadoFormAction.fechaInicioContrato}" pattern="dd/MM/yyyy" />
            <h:outputText value="#{message['empleado.cargo']}" />
            <p:selectOneMenu value="#{mantenimientoEmpleadoFormAction.idCargo}" label="Seleccione" filter="true" filterText="Filter" filterMatchMode="startsWith" panelStyle="width:300px">  
            <f:selectItems value="#{comboAction.cargoEmpleadoItems}" />
            </p:selectOneMenu>
            <p:outputLabel  value="#{message['empleado.tipoPago']}" for="tipopago" />
            <p:selectOneMenu id="tipopago" value="#{mantenimientoEmpleadoFormAction.idTipoPago}">
            <f:selectItems value="#{comboAction.tipoPagoItems}"/>
            </p:selectOneMenu>
            <h:outputText value="#{message['empleado.basico']}" />
            <p:spinner value="#{mantenimientoEmpleadoFormAction.objContratoEmpleado.basico}" min="1" /> 
            <h:outputText value="#{message['empleado.periodoPrueba']}" />
            <p:spinner title="x mes" value="#{mantenimientoEmpleadoFormAction.objContratoEmpleado.periodoPrueba}"/> 
            <p:commandButton value="Agregar" update="panelPagos, message" action="#{mantenimientoEmpleadoFormAction.agregarPago}" icon="ui-icon-check"/>
           
            	<p:dataTable id="panelPagos" value="#{mantenimientoEmpleadoFormAction.contratoEmpleadoList}" var="c"  >
						
						<p:column headerText="item" >
							<h:outputText value="#{c.item}" />
						</p:column>
						<p:column headerText="tipo" >
							<h:outputText value="#{c.tipo}" />
						</p:column>
						<p:column headerText="#{message['empleado.tabla.cargo']}" >
							<h:outputText value="#{c.tbCargoempleado.descripcion}" />
						</p:column>
						<p:column headerText="#{message['empleado.tabla.fecIni']}" >
							<h:outputText value="#{c.fechaInicioContrato}" />
						</p:column>
						<p:column headerText="#{message['empleado.tabla.sueldo']}" >
							<h:outputText value="#{c.basico}" />
						</p:column>
						<p:column headerText="Eliminar" style="width:125px">
		                    <p:commandButton id="showconfirmDeshabilitarConEmp" 
				            value="Eliminar"  icon="ui-icon ui-icon-close"
				            onclick="confirmationConEmp.show()"> 
	 							
                            <f:setPropertyActionListener
		                    value="#{c.item}" target="#{mantenimientoEmpleadoFormAction.idContrato}"     />
		                    </p:commandButton>
		                 </p:column>
				</p:dataTable>
			</h:panelGrid> 
            <p:commandButton id="btngu" value="Guardar" update="message" action="#{mantenimientoEmpleadoFormAction.insertar}" ajax="false" icon="ui-icon-check">
            </p:commandButton>
           </p:panel>
        </p:tab>
        </p:wizard>
         <p:commandButton id="btnreg" value="Regresar" action="#{mantenimientoEmpleadoSearchAction.listar}" immediate="true" ajax = "false" icon="ui-icon ui-icon-close"/> 
			
	</p:panel>	            
	</h:form>
	</ui:define>
</ui:composition>